<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashes & Dots</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
  <link href="/css/output.css" rel="stylesheet">
  <link href="icon.ico" rel="icon">
</head>
<style>
  .styled-checkbox {
    width: 2.5rem; /* Ajustar tamaño de los checkboxes */
    height: 2.5rem;
    background-color: white;
    border: 2px solid #d1d5db; /* Mismo color de borde que los inputs */
    border-radius: 0.375rem; /* Mismo radio que los inputs */
    appearance: none;
    cursor: pointer;
  }

  .styled-checkbox:checked {
    background-color: #4f46e5; /* Color de fondo cuando está marcada */
    border-color: #4f46e5; /* Cambiar el color del borde cuando está marcada */
  }

  .styled-checkbox:checked::before {
    content: '✔'; /* Mostrar un check al marcar */
    color: white;
    font-size: 1.5rem;
    display: block;
    text-align: center;
    line-height: 2.5rem;
  }
</style>
<body>
<section class="flex h-screen justify-center items-center px-16 py-12 text-base font-medium leading-6 text-black max-md:px-5 bg-gradient-to-b from-purple-800 to-gray-300 overflow-hidden">
  <div class="flex flex-col justify-center px-20 py-20 max-w-full bg-white rounded-3xl shadow-sm max-md:px-5 w-3/5 max-h-screen overflow-scroll">
      <h1 class="self-center mt-8 text-3xl font-extrabold">Crear un nivel y/o una pregunta</h1>
      <form class="flex flex-col overflow-auto" action="/niveles_preguntas" method="POST">
        <label for="levels" class="block mt-3">Seleccione un nivel:</label>
        <select
            id="levels"
            name="level"
            class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
        >
        <%@levels.each_with_index do |level, index|%>
            <option value="<%= level.id%>"> <%= index+1%>. <%= level.name%></option>
        <%end%>
            <option value="new">Crear nuevo nivel</option>
        </select>

        <div id="new-level-fields" style="display: none;">
            <label for="level_type" class="block mt-3">Seleccione un tipo de nivel:</label>
            <select
            id="level_type"
            name="level_type"
            class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
            >
            <%@level_types.each_with_index do |level_type, index|%>
            <option value="<%= level_type%>"> <%= index+1%>. <%= level_type%></option>
            <%end%>
            </select>

            <label for="level_name" class="block mt-3">Ingrese el nombre del nivel:</label>
            <input
              id="level_name"
              name="level_name"
              type="text"
              class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Nombre" aria-label="Nombre"
            />
        </div>

        <label for="question_type" class="block mt-3">Ingrese el tipo de pregunta:</label>
          <select
              id="question_type"
              name="question_type"
              class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
          >
        <%@question_types.each_with_index do |question_type, index|%>
            <option value ="<%= question_type%>"> <%= index+1%>. <%= question_type%> </option>
        <%end%>
          </select>

        <div id="multiple-choice-fields" style="display: none;">
          <label for="op1" class="block mt-3">Opción 1:</label>
          <div class="flex items-center">
            <input
              id="op1"
              name="op1"
              type="text"
              class="justify-center w-11/12 px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Opcion 1"
              aria-label="Opcion 1"
            />
            <div class="flex flex-col items-center ml-2">
              <span class="text-sm font-bold mb-1">Correcta</span>
              <input type="checkbox" class="styled-checkbox correct-checkbox" name="correct_option" value="op1">
            </div>
          </div>

          <label for="op2" class="block mt-3">Opción 2:</label>
          <div class="flex items-center">
            <input
              id="op2"
              name="op2"
              type="text"
              class="justify-center w-11/12 px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Opcion 2"
              aria-label="Opcion 2"
            />
            <div class="flex flex-col items-center ml-2">
              <span class="text-sm font-bold mb-1">Correcta</span>
              <input type="checkbox" class="styled-checkbox correct-checkbox" name="correct_option" value="op2">
            </div>
          </div>

          <label for="op3" class="block mt-3">Opción 3:</label>
          <div class="flex items-center">
            <input
              id="op3"
              name="op3"
              type="text"
              class="justify-center w-11/12 px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Opcion 3"
              aria-label="Opcion 3"
            />
            <div class="flex flex-col items-center ml-2">
              <span class="text-sm font-bold mb-1">Correcta</span>
              <input type="checkbox" class="styled-checkbox correct-checkbox" name="correct_option" value="op3">
            </div>
          </div>

          <label for="op4" class="block mt-3">Opción 4:</label>
          <div class="flex items-center">
            <input
              id="op4"
              name="op4"
              type="text"
              class="justify-center w-11/12 px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Opcion 4"
              aria-label="Opcion 4"
            />
            <div class="flex flex-col items-center ml-2">
              <span class="text-sm font-bold mb-1">Correcta</span>
              <input type="checkbox" class="styled-checkbox correct-checkbox" name="correct_option" value="op4">
            </div>
          </div>
        </div>

        <div id="other-questions-fields" style="display: none;">
           <label for="correct_answer" class="block mt-3">Introduce la respuesta correcta:</label>
              <input
                id = "correct_answer"
                name = "correct_answer"
                type="text"
                class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
                placeholder="Respuesta correcta" aria-label="Respuesta correcta"
              />
        </div>

        <label for="question_description" class="block mt-3">Ingrese la descripcion de la pregunta:</label>
          <input
              id="question_description"
              name="question_description"
              type="text"
              class="justify-center w-full px-4 py-1.5 mt-2 text-xl whitespace-nowrap bg-white rounded-lg border border-solid border-neutral-200 text-ellipsis"
              placeholder="Descripcion" aria-label="Descripcion"
          />

          <button type="submit" class="justify-center self-center px-4 py-2 mt-3 mb-2.5 text-white bg-black rounded-lg">
            Crear nivel y/o pregunta
          </button>
      </form>
  </div>
</section>
<script>
    function toggleNewLevelFields() {
      const levelSelect = document.getElementById('levels');
      const newLevelFields = document.getElementById('new-level-fields');
      
      if (levelSelect.value === "new") {
        newLevelFields.style.display = "block";
      } else {
        newLevelFields.style.display = "none";
      }
    }

    function toggleMultipleChoiceFields() {
      const questionTypeSelect = document.getElementById('question_type');
      const multipleChoiceFields = document.getElementById('multiple-choice-fields');
      
      if (questionTypeSelect.value === "Multiple_choice") {
        multipleChoiceFields.style.display = "block";
      } else {
        multipleChoiceFields.style.display = "none";
      }
    }

    function toggleOtherQuestionsFields() {
      const questionTypeSelect = document.getElementById('question_type');
      const otherQuestionsFields = document.getElementById('other-questions-fields');
      
      if (questionTypeSelect.value !== "Multiple_choice") {
        otherQuestionsFields.style.display = "block";
      } else {
        otherQuestionsFields.style.display = "none";
      }
    }

    window.onload = function() {
      document.getElementById('levels').addEventListener('change', toggleNewLevelFields);
      document.getElementById('question_type').addEventListener('change', toggleMultipleChoiceFields);
      document.getElementById('question_type').addEventListener('change', toggleOtherQuestionsFields);

      toggleNewLevelFields();
      toggleMultipleChoiceFields();
      toggleOtherQuestionsFields();
    };

    const checkboxes = document.querySelectorAll('.correct-checkbox');

    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        if (this.checked) {
          checkboxes.forEach(box => {
            if (box !== this) box.checked = false;
          });
        }
      });
    });
</script>
</body>
</html>
